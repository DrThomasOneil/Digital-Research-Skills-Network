<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3: Basic Programming | Introduction to R and analytic Programming</title>
  <meta name="description" content="Chapter 3: Basic Programming | Introduction to R and analytic Programming" />
  <meta name="generator" content="bookdown 0.41 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3: Basic Programming | Introduction to R and analytic Programming" />
  <meta property="og:type" content="book" />
  
  
  <meta name="github-repo" content="DrThomasOneil/analysis-user-group" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3: Basic Programming | Introduction to R and analytic Programming" />
  
  
  

<meta name="author" content="Yuchen Li &amp; Thomas O’Neil" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="chapter-2-data-types-and-structures.html"/>
<link rel="next" href="chapter-4-data-manipulation-with-tidyverse.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/codefolding-lua-1.1/codefolding-lua.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  background-color: #f8f8f8; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ef2929; } /* Alert */
code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #204a87; } /* Attribute */
code span.bn { color: #0000cf; } /* BaseN */
code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4e9a06; } /* Char */
code span.cn { color: #8f5902; } /* Constant */
code span.co { color: #8f5902; font-style: italic; } /* Comment */
code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code span.dt { color: #204a87; } /* DataType */
code span.dv { color: #0000cf; } /* DecVal */
code span.er { color: #a40000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #0000cf; } /* Float */
code span.fu { color: #204a87; font-weight: bold; } /* Function */
code span.im { } /* Import */
code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code span.ot { color: #8f5902; } /* Other */
code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code span.sc { color: #ce5c00; font-weight: bold; } /* SpecialChar */
code span.ss { color: #4e9a06; } /* SpecialString */
code span.st { color: #4e9a06; } /* String */
code span.va { color: #000000; } /* Variable */
code span.vs { color: #4e9a06; } /* VerbatimString */
code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Introduction to R and analytic Programming</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome!</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i>Introduction</a>
<ul>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#transitioning-from-manual-tools-e.g.-excel-prism-to-programming-based-workflows-in-r."><i class="fa fa-check"></i>Transitioning from manual tools (e.g. Excel &amp; Prism) to programming-based workflows in R.</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#handling-data---be-specific"><i class="fa fa-check"></i>Handling data - be specific!</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#directories"><i class="fa fa-check"></i>Directories</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#reproducibility-and-automation"><i class="fa fa-check"></i>Reproducibility and automation</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-1-getting-started-in-r-and-rstudio.html"><a href="chapter-1-getting-started-in-r-and-rstudio.html"><i class="fa fa-check"></i>Chapter 1: Getting Started in R and RStudio</a>
<ul>
<li class="chapter" data-level="" data-path="chapter-1-getting-started-in-r-and-rstudio.html"><a href="chapter-1-getting-started-in-r-and-rstudio.html#r-as-a-programming-language"><i class="fa fa-check"></i>R as a programming language</a></li>
<li class="chapter" data-level="" data-path="chapter-1-getting-started-in-r-and-rstudio.html"><a href="chapter-1-getting-started-in-r-and-rstudio.html#installing-r-and-rstudio"><i class="fa fa-check"></i>Installing R and RStudio</a></li>
<li class="chapter" data-level="" data-path="chapter-1-getting-started-in-r-and-rstudio.html"><a href="chapter-1-getting-started-in-r-and-rstudio.html#navigating-rstudio"><i class="fa fa-check"></i>Navigating RStudio</a></li>
<li class="chapter" data-level="" data-path="chapter-1-getting-started-in-r-and-rstudio.html"><a href="chapter-1-getting-started-in-r-and-rstudio.html#projects"><i class="fa fa-check"></i>Projects</a></li>
<li class="chapter" data-level="" data-path="chapter-1-getting-started-in-r-and-rstudio.html"><a href="chapter-1-getting-started-in-r-and-rstudio.html#using-r"><i class="fa fa-check"></i>Using R</a></li>
<li class="chapter" data-level="" data-path="chapter-1-getting-started-in-r-and-rstudio.html"><a href="chapter-1-getting-started-in-r-and-rstudio.html#hello-world"><i class="fa fa-check"></i>Hello World</a></li>
<li class="chapter" data-level="" data-path="chapter-1-getting-started-in-r-and-rstudio.html"><a href="chapter-1-getting-started-in-r-and-rstudio.html#optional-exercise-write-your-first-second-script"><i class="fa fa-check"></i>Optional Exercise: Write your <strike>first</strike> second script</a></li>
<li class="chapter" data-level="" data-path="chapter-1-getting-started-in-r-and-rstudio.html"><a href="chapter-1-getting-started-in-r-and-rstudio.html#next-chapter"><i class="fa fa-check"></i>Next Chapter</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-2-data-types-and-structures.html"><a href="chapter-2-data-types-and-structures.html"><i class="fa fa-check"></i>Chapter 2: Data Types and Structures</a>
<ul>
<li class="chapter" data-level="" data-path="chapter-2-data-types-and-structures.html"><a href="chapter-2-data-types-and-structures.html#data-types"><i class="fa fa-check"></i>Data Types</a></li>
<li class="chapter" data-level="" data-path="chapter-2-data-types-and-structures.html"><a href="chapter-2-data-types-and-structures.html#data-structures"><i class="fa fa-check"></i>Data Structures</a></li>
<li class="chapter" data-level="" data-path="chapter-2-data-types-and-structures.html"><a href="chapter-2-data-types-and-structures.html#importing-and-saving-files-in-r"><i class="fa fa-check"></i>Importing and saving files in R</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-3-basic-programming.html"><a href="chapter-3-basic-programming.html"><i class="fa fa-check"></i>Chapter 3: Basic Programming</a>
<ul>
<li class="chapter" data-level="" data-path="chapter-3-basic-programming.html"><a href="chapter-3-basic-programming.html#assigning-variables"><i class="fa fa-check"></i>Assigning variables</a></li>
<li class="chapter" data-level="" data-path="chapter-3-basic-programming.html"><a href="chapter-3-basic-programming.html#conditional-statements"><i class="fa fa-check"></i>Conditional statements</a></li>
<li class="chapter" data-level="" data-path="chapter-3-basic-programming.html"><a href="chapter-3-basic-programming.html#loops"><i class="fa fa-check"></i>Loops</a></li>
<li class="chapter" data-level="" data-path="chapter-3-basic-programming.html"><a href="chapter-3-basic-programming.html#writing-a-function"><i class="fa fa-check"></i>Writing a function</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-4-data-manipulation-with-tidyverse.html"><a href="chapter-4-data-manipulation-with-tidyverse.html"><i class="fa fa-check"></i>Chapter 4: Data Manipulation with <code>tidyverse</code></a>
<ul>
<li class="chapter" data-level="" data-path="chapter-4-data-manipulation-with-tidyverse.html"><a href="chapter-4-data-manipulation-with-tidyverse.html#why-use-tidyverse"><i class="fa fa-check"></i>Why use tidyverse</a></li>
<li class="chapter" data-level="" data-path="chapter-4-data-manipulation-with-tidyverse.html"><a href="chapter-4-data-manipulation-with-tidyverse.html#filtering-rows-and-columns"><i class="fa fa-check"></i>Filtering rows and columns</a></li>
<li class="chapter" data-level="" data-path="chapter-4-data-manipulation-with-tidyverse.html"><a href="chapter-4-data-manipulation-with-tidyverse.html#adding-a-column-using-mutate"><i class="fa fa-check"></i>Adding a column using <code>mutate()</code></a></li>
<li class="chapter" data-level="" data-path="chapter-4-data-manipulation-with-tidyverse.html"><a href="chapter-4-data-manipulation-with-tidyverse.html#group_by-and-summarize"><i class="fa fa-check"></i><code>group_by()</code> and <code>summarize()</code></a></li>
<li class="chapter" data-level="" data-path="chapter-4-data-manipulation-with-tidyverse.html"><a href="chapter-4-data-manipulation-with-tidyverse.html#pivot"><i class="fa fa-check"></i>Pivot</a>
<ul>
<li class="chapter" data-level="" data-path="chapter-4-data-manipulation-with-tidyverse.html"><a href="chapter-4-data-manipulation-with-tidyverse.html#hopefully-it-is-clear-why-tidyverse-is-a-useful-tool."><i class="fa fa-check"></i>Hopefully it is clear why <code>tidyverse</code> is a useful tool.</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-5-data-visualisation-with-ggplot2.html"><a href="chapter-5-data-visualisation-with-ggplot2.html"><i class="fa fa-check"></i>Chapter 5: Data Visualisation with <code>ggplot2</code></a>
<ul>
<li class="chapter" data-level="" data-path="chapter-5-data-visualisation-with-ggplot2.html"><a href="chapter-5-data-visualisation-with-ggplot2.html#basics-of-ggplot2"><i class="fa fa-check"></i>Basics of ggplot2</a>
<ul>
<li class="chapter" data-level="" data-path="chapter-5-data-visualisation-with-ggplot2.html"><a href="chapter-5-data-visualisation-with-ggplot2.html#scatterplot"><i class="fa fa-check"></i>Scatterplot</a></li>
<li class="chapter" data-level="" data-path="chapter-5-data-visualisation-with-ggplot2.html"><a href="chapter-5-data-visualisation-with-ggplot2.html#boxplot"><i class="fa fa-check"></i>Boxplot</a></li>
<li class="chapter" data-level="" data-path="chapter-5-data-visualisation-with-ggplot2.html"><a href="chapter-5-data-visualisation-with-ggplot2.html#columnbar-graph"><i class="fa fa-check"></i>Column/bar graph</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-5-data-visualisation-with-ggplot2.html"><a href="chapter-5-data-visualisation-with-ggplot2.html#summary"><i class="fa fa-check"></i>Summary</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-6-data-visualisation-with-ggplot2-2.html"><a href="chapter-6-data-visualisation-with-ggplot2-2.html"><i class="fa fa-check"></i>Chapter 6: Data Visualisation with <code>ggplot2</code> 2</a>
<ul>
<li class="chapter" data-level="" data-path="chapter-6-data-visualisation-with-ggplot2-2.html"><a href="chapter-6-data-visualisation-with-ggplot2-2.html#adjusting-theme-elements"><i class="fa fa-check"></i>Adjusting theme elements</a></li>
<li class="chapter" data-level="" data-path="chapter-6-data-visualisation-with-ggplot2-2.html"><a href="chapter-6-data-visualisation-with-ggplot2-2.html#annotating-the-plot"><i class="fa fa-check"></i>Annotating the plot</a></li>
<li class="chapter" data-level="" data-path="chapter-6-data-visualisation-with-ggplot2-2.html"><a href="chapter-6-data-visualisation-with-ggplot2-2.html#facet_wrap-and-group"><i class="fa fa-check"></i>facet_wrap() and Group</a></li>
<li class="chapter" data-level="" data-path="chapter-6-data-visualisation-with-ggplot2-2.html"><a href="chapter-6-data-visualisation-with-ggplot2-2.html#saving-plots"><i class="fa fa-check"></i>Saving plots</a></li>
<li class="chapter" data-level="" data-path="chapter-6-data-visualisation-with-ggplot2-2.html"><a href="chapter-6-data-visualisation-with-ggplot2-2.html#some-final-hints"><i class="fa fa-check"></i>Some final hints</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-7-statistical-analysis.html"><a href="chapter-7-statistical-analysis.html"><i class="fa fa-check"></i>Chapter 7: Statistical Analysis</a>
<ul>
<li class="chapter" data-level="" data-path="chapter-7-statistical-analysis.html"><a href="chapter-7-statistical-analysis.html#descriptive-statistics"><i class="fa fa-check"></i>Descriptive statistics</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-8-reproducible-reports-with-rmarkdown.html"><a href="chapter-8-reproducible-reports-with-rmarkdown.html"><i class="fa fa-check"></i>Chapter 8: Reproducible Reports with RMarkdown</a></li>
<li class="chapter" data-level="" data-path="conclusions.html"><a href="conclusions.html"><i class="fa fa-check"></i>Conclusions</a></li>
<li class="divider"></li>
<li><a href="https://drthomasoneil.github.io/analysis-user-group" target="blank"><i><strong>Return to the analysis page!</strong></i></a></li>
<li><a href="https://github.com/DrThomasOneil/analysis-user-group/tree/main/docs/r-tutorial" target="blank">See The Source Code</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Introduction to R and analytic Programming</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="chapter-3-basic-programming" class="section level1 hasAnchor">
<h1>Chapter 3: Basic Programming<a href="chapter-3-basic-programming.html#chapter-3-basic-programming" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div class="hint-goals">
<p><strong>Goals:</strong><br />
Understand programming logic for automating tasks.<br />
  • Variables and assignments.<br />
  • Conditional statements (<code>if</code>, <code>else</code>).<br />
  • Loops (<code>for</code>, <code>while</code>).<br />
  • Writing functions.</p>
</div>
<p><read-time><i><strong>Read time</strong>: 10 Minutes</i></read-time></p>
<p><wimr></p>
<div id="assigning-variables" class="section level2 hasAnchor">
<h2>Assigning variables<a href="chapter-3-basic-programming.html#assigning-variables" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>We’ve already introduced variable assignment, where a value is stored in a named object. For example, <code>a &lt;- 3</code> assigns the value <code>3</code> to <code>a</code>. We’ve also already assigned dataframes and lists to <code>objects</code> too.</p>
<p>This allows us to store and reuse information efficiently, reducing redundancy in our code. You can store anything you might want to use later, but remember that you will continuously take up more and more space with every object and variable you save.</p>
<details class=chunk-details open><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb82-1"><a href="chapter-3-basic-programming.html#cb82-1" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">&quot;directory&quot;</span>)</span></code></pre></div>
</details>
<details class=chunk-details open><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="chapter-3-basic-programming.html#cb83-1" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;~/Desktop/analysis-user-group/synthetic_data.csv&quot;</span>)</span></code></pre></div>
</details>
<div class="hint-warning">
<p><strong>Keep an eye on your environment</strong>. It will inflate quickly. You can use <code>rm(object1, object2, objectn)</code> to remove objects from your environment.</p>
</div>
<p><wimr></p>
</div>
<div id="conditional-statements" class="section level2 hasAnchor">
<h2>Conditional statements<a href="chapter-3-basic-programming.html#conditional-statements" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Conditional statements allow you to control the flow of your code by executing different actions based on specific conditions.</p>
<details class=chunk-details open><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb84-1"><a href="chapter-3-basic-programming.html#cb84-1" tabindex="-1"></a>data<span class="sc">$</span>predominant_subset <span class="ot">&lt;-</span> <span class="fu">ifelse</span>( <span class="co"># Unlike an if statement that evaluates a single condition, ifelse() is vectorized and applies the condition across an entire column.</span></span>
<span id="cb84-2"><a href="chapter-3-basic-programming.html#cb84-2" tabindex="-1"></a>  data<span class="sc">$</span>CD8 <span class="sc">&gt;</span> data<span class="sc">$</span>CD4, <span class="co">#Condition</span></span>
<span id="cb84-3"><a href="chapter-3-basic-programming.html#cb84-3" tabindex="-1"></a>  <span class="st">&quot;CD8&quot;</span>, <span class="co"># if condition is met, this is the outcome</span></span>
<span id="cb84-4"><a href="chapter-3-basic-programming.html#cb84-4" tabindex="-1"></a>  <span class="st">&quot;CD4&quot;</span> <span class="co"># ELSE this is the outcome. </span></span>
<span id="cb84-5"><a href="chapter-3-basic-programming.html#cb84-5" tabindex="-1"></a>)</span>
<span id="cb84-6"><a href="chapter-3-basic-programming.html#cb84-6" tabindex="-1"></a></span>
<span id="cb84-7"><a href="chapter-3-basic-programming.html#cb84-7" tabindex="-1"></a><span class="co"># get a quick summary of these results</span></span>
<span id="cb84-8"><a href="chapter-3-basic-programming.html#cb84-8" tabindex="-1"></a><span class="fu">table</span>(data<span class="sc">$</span>predominant_subset, data<span class="sc">$</span>layer, data<span class="sc">$</span>tissue)</span></code></pre></div>
</details>
<pre><code>## , ,  = Abdo
## 
##      
##       Epithelium Underlying
##   CD4          0          0
##   CD8          1          1
## 
## , ,  = abdomen
## 
##      
##       Epithelium Underlying
##   CD4          0          0
##   CD8          0          1
## 
## , ,  = Abdomen
## 
##      
##       Epithelium Underlying
##   CD4          5          0
##   CD8         18         22
## 
## , ,  = Labia
## 
##      
##       Epithelium Underlying
##   CD4          0         20
##   CD8         20          0
## 
## , ,  = Vagina
## 
##      
##       Epithelium Underlying
##   CD4          0         16
##   CD8         16          0</code></pre>
<p>You can see that there are several variations of the <strong>Abdomen</strong> tissue type, likely as a result of human input error when adding data to the csv. We’ll fix these below using loops.</p>
</div>
<div id="loops" class="section level2 hasAnchor">
<h2>Loops<a href="chapter-3-basic-programming.html#loops" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>There are two main types of loops in R:<br />
- For loops: Used when the number of iterations is known. E.g. <em>for indexes in 1 through 100, print which index you’re up to</em> written as</p>
<pre class="script"><code>for(index in 1:100){print(index)}</code></pre>
<ul>
<li>While loops: Used when iterations depend on a condition. E.g. <em>while the index is less than or equal to 100, print the index</em> written as:</li>
</ul>
<details class=chunk-details open><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb87-1"><a href="chapter-3-basic-programming.html#cb87-1" tabindex="-1"></a>index<span class="ot">=</span><span class="dv">1</span></span>
<span id="cb87-2"><a href="chapter-3-basic-programming.html#cb87-2" tabindex="-1"></a><span class="cf">while</span>(index <span class="sc">&lt;=</span><span class="dv">100</span>){</span>
<span id="cb87-3"><a href="chapter-3-basic-programming.html#cb87-3" tabindex="-1"></a>  <span class="fu">print</span>(index)</span>
<span id="cb87-4"><a href="chapter-3-basic-programming.html#cb87-4" tabindex="-1"></a>  index<span class="ot">=</span>index<span class="sc">+</span><span class="dv">1</span></span>
<span id="cb87-5"><a href="chapter-3-basic-programming.html#cb87-5" tabindex="-1"></a>}</span></code></pre></div>
</details>
<p>Here’s an example of a loop checking for inconsistent tissue labels.</p>
<details class=chunk-details open><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb88-1"><a href="chapter-3-basic-programming.html#cb88-1" tabindex="-1"></a>n_vagina <span class="ot">=</span> <span class="dv">0</span></span>
<span id="cb88-2"><a href="chapter-3-basic-programming.html#cb88-2" tabindex="-1"></a>n_labia <span class="ot">=</span> <span class="dv">0</span></span>
<span id="cb88-3"><a href="chapter-3-basic-programming.html#cb88-3" tabindex="-1"></a>n_abdo <span class="ot">=</span> <span class="dv">0</span></span>
<span id="cb88-4"><a href="chapter-3-basic-programming.html#cb88-4" tabindex="-1"></a></span>
<span id="cb88-5"><a href="chapter-3-basic-programming.html#cb88-5" tabindex="-1"></a><span class="cf">for</span>(index <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(data)){ <span class="co">#loop from 1 through nrows in data (1,2,3...121,120) and assign this value to &#39;index&#39;</span></span>
<span id="cb88-6"><a href="chapter-3-basic-programming.html#cb88-6" tabindex="-1"></a>  <span class="cf">if</span>(data<span class="sc">$</span>tissue[index] <span class="sc">==</span> <span class="st">&quot;Abdomen&quot;</span>){ <span class="co">#check if the string at row[index] in the &#39;tissue&#39; column matches abdomen. </span></span>
<span id="cb88-7"><a href="chapter-3-basic-programming.html#cb88-7" tabindex="-1"></a>    n_abdo <span class="ot">=</span> n_abdo<span class="sc">+</span><span class="dv">1</span> <span class="co">#If so, add 1 to the variable. </span></span>
<span id="cb88-8"><a href="chapter-3-basic-programming.html#cb88-8" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span>(data<span class="sc">$</span>tissue[index] <span class="sc">==</span> <span class="st">&quot;Labia&quot;</span>){ <span class="co"># repeat</span></span>
<span id="cb88-9"><a href="chapter-3-basic-programming.html#cb88-9" tabindex="-1"></a>    n_labia<span class="ot">=</span>n_labia<span class="sc">+</span><span class="dv">1</span></span>
<span id="cb88-10"><a href="chapter-3-basic-programming.html#cb88-10" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span>(data<span class="sc">$</span>tissue[index] <span class="sc">==</span> <span class="st">&quot;Vagina&quot;</span>){</span>
<span id="cb88-11"><a href="chapter-3-basic-programming.html#cb88-11" tabindex="-1"></a>    n_vagina<span class="ot">=</span>n_vagina<span class="sc">+</span><span class="dv">1</span></span>
<span id="cb88-12"><a href="chapter-3-basic-programming.html#cb88-12" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb88-13"><a href="chapter-3-basic-programming.html#cb88-13" tabindex="-1"></a>    <span class="fu">print</span>(<span class="fu">paste</span>(data<span class="sc">$</span>tissue[index], <span class="st">&quot;at index&quot;</span>,index,<span class="st">&quot;does not match Abdomen, Labia or Vagina.&quot;</span>)) <span class="co"># print a statement if the condition is met.</span></span>
<span id="cb88-14"><a href="chapter-3-basic-programming.html#cb88-14" tabindex="-1"></a>  }</span>
<span id="cb88-15"><a href="chapter-3-basic-programming.html#cb88-15" tabindex="-1"></a>}</span></code></pre></div>
</details>
<pre><code>## [1] &quot;abdomen at index 24 does not match Abdomen, Labia or Vagina.&quot;
## [1] &quot;Abdo at index 61 does not match Abdomen, Labia or Vagina.&quot;
## [1] &quot;Abdo at index 62 does not match Abdomen, Labia or Vagina.&quot;</code></pre>
<details class=chunk-details open><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb90"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb90-1"><a href="chapter-3-basic-programming.html#cb90-1" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">paste0</span>(n_vagina, <span class="st">&quot; vagina samples. &quot;</span>, n_labia, <span class="st">&quot; labia samples. &quot;</span>, n_abdo, <span class="st">&quot; abdomen samples. (Total: &quot;</span>,n_abdo<span class="sc">+</span>n_labia<span class="sc">+</span>n_vagina,<span class="st">&quot;)&quot;</span> ))</span></code></pre></div>
</details>
<pre><code>## [1] &quot;32 vagina samples. 40 labia samples. 45 abdomen samples. (Total: 117)&quot;</code></pre>
<p>We know that there are 120 samples, but here it’s printing 117, because there are 3 instances where Abdomen are not found (written <em>abdomen</em>, or <em>Abdo</em>). This will be a headache when generate plots or statistics. We could change these manutally, but I’ll write a function below which finds those errors and lets the user change the value.</p>
</div>
<div id="writing-a-function" class="section level2 hasAnchor">
<h2>Writing a function<a href="chapter-3-basic-programming.html#writing-a-function" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Functions help modularize your code, reducing repetition and improving readability. Instead of rewriting similar blocks of code, you can define a function and call it whenever needed. For example, with single cell RNA analysis with Seurat, if you’re testing different variables, having the workflow summarized in one function will make your workflow tidier.</p>
<p>Here we’re just going to write the checker above into a function with some extra user-input functionality.</p>
<details class=chunk-details open><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb92-1"><a href="chapter-3-basic-programming.html#cb92-1" tabindex="-1"></a>sample_counter <span class="ot">&lt;-</span> <span class="cf">function</span>(data){</span>
<span id="cb92-2"><a href="chapter-3-basic-programming.html#cb92-2" tabindex="-1"></a>  n_vagina <span class="ot">=</span> <span class="dv">0</span></span>
<span id="cb92-3"><a href="chapter-3-basic-programming.html#cb92-3" tabindex="-1"></a>  n_labia <span class="ot">=</span> <span class="dv">0</span></span>
<span id="cb92-4"><a href="chapter-3-basic-programming.html#cb92-4" tabindex="-1"></a>  n_abdo <span class="ot">=</span> <span class="dv">0</span></span>
<span id="cb92-5"><a href="chapter-3-basic-programming.html#cb92-5" tabindex="-1"></a>  </span>
<span id="cb92-6"><a href="chapter-3-basic-programming.html#cb92-6" tabindex="-1"></a>  <span class="cf">for</span>(index <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(data)){ <span class="co">#loop from 1 through nrows in data (1,2,3...121,120) and assign this value to &#39;index&#39;</span></span>
<span id="cb92-7"><a href="chapter-3-basic-programming.html#cb92-7" tabindex="-1"></a>    <span class="cf">if</span>(data<span class="sc">$</span>tissue[index] <span class="sc">==</span> <span class="st">&quot;Abdomen&quot;</span>){ <span class="co">#check if the string at row[index] in the &#39;tissue&#39; column matches abdomen. </span></span>
<span id="cb92-8"><a href="chapter-3-basic-programming.html#cb92-8" tabindex="-1"></a>      n_abdo <span class="ot">=</span> n_abdo<span class="sc">+</span><span class="dv">1</span> <span class="co">#If so, add 1 to the variable. </span></span>
<span id="cb92-9"><a href="chapter-3-basic-programming.html#cb92-9" tabindex="-1"></a>    } <span class="cf">else</span> <span class="cf">if</span>(data<span class="sc">$</span>tissue[index] <span class="sc">==</span> <span class="st">&quot;Labia&quot;</span>){</span>
<span id="cb92-10"><a href="chapter-3-basic-programming.html#cb92-10" tabindex="-1"></a>      n_labia<span class="ot">=</span>n_labia<span class="sc">+</span><span class="dv">1</span></span>
<span id="cb92-11"><a href="chapter-3-basic-programming.html#cb92-11" tabindex="-1"></a>    } <span class="cf">else</span> <span class="cf">if</span>(data<span class="sc">$</span>tissue[index] <span class="sc">==</span> <span class="st">&quot;Vagina&quot;</span>){</span>
<span id="cb92-12"><a href="chapter-3-basic-programming.html#cb92-12" tabindex="-1"></a>      n_vagina<span class="ot">=</span>n_vagina<span class="sc">+</span><span class="dv">1</span></span>
<span id="cb92-13"><a href="chapter-3-basic-programming.html#cb92-13" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb92-14"><a href="chapter-3-basic-programming.html#cb92-14" tabindex="-1"></a>      <span class="fu">print</span>(<span class="fu">paste</span>(data<span class="sc">$</span>tissue[index], <span class="st">&quot;at index&quot;</span>,index,<span class="st">&quot;does not match Abdomen, Labia or Vagina.&quot;</span>))</span>
<span id="cb92-15"><a href="chapter-3-basic-programming.html#cb92-15" tabindex="-1"></a>      checkval<span class="ot">=</span><span class="dv">0</span></span>
<span id="cb92-16"><a href="chapter-3-basic-programming.html#cb92-16" tabindex="-1"></a>      <span class="cf">while</span>(checkval<span class="sc">==</span><span class="dv">0</span>){</span>
<span id="cb92-17"><a href="chapter-3-basic-programming.html#cb92-17" tabindex="-1"></a>        input <span class="ot">=</span> <span class="fu">readline</span>(<span class="st">&quot;Choose correct value: [1] Abdomen, [2] Labia, [3] Vagina. &quot;</span>)</span>
<span id="cb92-18"><a href="chapter-3-basic-programming.html#cb92-18" tabindex="-1"></a>        <span class="cf">if</span>(input <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)) {</span>
<span id="cb92-19"><a href="chapter-3-basic-programming.html#cb92-19" tabindex="-1"></a>           <span class="cf">if</span>(input<span class="sc">==</span><span class="dv">1</span>){</span>
<span id="cb92-20"><a href="chapter-3-basic-programming.html#cb92-20" tabindex="-1"></a>             n_abdo <span class="ot">=</span> n_abdo<span class="sc">+</span><span class="dv">1</span></span>
<span id="cb92-21"><a href="chapter-3-basic-programming.html#cb92-21" tabindex="-1"></a>             data<span class="sc">$</span>tissue[index] <span class="ot">=</span> <span class="st">&quot;Abdomen&quot;</span></span>
<span id="cb92-22"><a href="chapter-3-basic-programming.html#cb92-22" tabindex="-1"></a>           } <span class="cf">else</span> <span class="cf">if</span>(input<span class="sc">==</span><span class="dv">2</span>) {</span>
<span id="cb92-23"><a href="chapter-3-basic-programming.html#cb92-23" tabindex="-1"></a>              n_labia<span class="ot">=</span>n_labia<span class="sc">+</span><span class="dv">1</span></span>
<span id="cb92-24"><a href="chapter-3-basic-programming.html#cb92-24" tabindex="-1"></a>              data<span class="sc">$</span>tissue[index] <span class="ot">=</span> <span class="st">&quot;Labia&quot;</span></span>
<span id="cb92-25"><a href="chapter-3-basic-programming.html#cb92-25" tabindex="-1"></a>  </span>
<span id="cb92-26"><a href="chapter-3-basic-programming.html#cb92-26" tabindex="-1"></a>           } <span class="cf">else</span> <span class="cf">if</span>(input<span class="sc">==</span><span class="dv">3</span>) {</span>
<span id="cb92-27"><a href="chapter-3-basic-programming.html#cb92-27" tabindex="-1"></a>              n_vagina<span class="ot">=</span>n_vagina<span class="sc">+</span><span class="dv">1</span></span>
<span id="cb92-28"><a href="chapter-3-basic-programming.html#cb92-28" tabindex="-1"></a>              data<span class="sc">$</span>tissue[index] <span class="ot">=</span> <span class="st">&quot;Vagina&quot;</span></span>
<span id="cb92-29"><a href="chapter-3-basic-programming.html#cb92-29" tabindex="-1"></a>           }</span>
<span id="cb92-30"><a href="chapter-3-basic-programming.html#cb92-30" tabindex="-1"></a>           checkval <span class="ot">=</span> <span class="dv">1</span> <span class="co">#exit the while loop</span></span>
<span id="cb92-31"><a href="chapter-3-basic-programming.html#cb92-31" tabindex="-1"></a>        } <span class="cf">else</span> {</span>
<span id="cb92-32"><a href="chapter-3-basic-programming.html#cb92-32" tabindex="-1"></a>          <span class="fu">cat</span>(<span class="st">&quot;</span><span class="sc">\n</span><span class="st">Incorrect input. Try again.</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb92-33"><a href="chapter-3-basic-programming.html#cb92-33" tabindex="-1"></a>        }</span>
<span id="cb92-34"><a href="chapter-3-basic-programming.html#cb92-34" tabindex="-1"></a>      }</span>
<span id="cb92-35"><a href="chapter-3-basic-programming.html#cb92-35" tabindex="-1"></a>    }</span>
<span id="cb92-36"><a href="chapter-3-basic-programming.html#cb92-36" tabindex="-1"></a>  }</span>
<span id="cb92-37"><a href="chapter-3-basic-programming.html#cb92-37" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">paste0</span>(n_vagina, <span class="st">&quot; vagina samples. &quot;</span>, n_labia, <span class="st">&quot; labia samples. &quot;</span>, n_abdo, <span class="st">&quot; abdomen samples. (Total: &quot;</span>,n_abdo<span class="sc">+</span>n_labia<span class="sc">+</span>n_vagina,<span class="st">&quot;)&quot;</span> ))</span>
<span id="cb92-38"><a href="chapter-3-basic-programming.html#cb92-38" tabindex="-1"></a>  <span class="fu">return</span>(data)</span>
<span id="cb92-39"><a href="chapter-3-basic-programming.html#cb92-39" tabindex="-1"></a>}</span></code></pre></div>
</details>
<details class=chunk-details open><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb93-1"><a href="chapter-3-basic-programming.html#cb93-1" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">sample_counter</span>(data)</span>
<span id="cb93-2"><a href="chapter-3-basic-programming.html#cb93-2" tabindex="-1"></a><span class="dv">1</span></span>
<span id="cb93-3"><a href="chapter-3-basic-programming.html#cb93-3" tabindex="-1"></a><span class="dv">1</span></span>
<span id="cb93-4"><a href="chapter-3-basic-programming.html#cb93-4" tabindex="-1"></a><span class="dv">1</span></span>
<span id="cb93-5"><a href="chapter-3-basic-programming.html#cb93-5" tabindex="-1"></a><span class="fu">write.csv</span>(data, <span class="st">&quot;~/Desktop/analysis-user-group/synthetic_data.csv&quot;</span>)</span></code></pre></div>
</details>
<p>Throughout your analysis, you’ll find more relevant for loops, while loops and functions that make you more efficient at programming.</p>
<p><a href="https://drthomasoneil.github.io/analysis-user-group/r-tutorial/_book/chapter-4-data-manipulation-with-tidyverse.html">Next chapter →</a></p>
<div id="quote-box" style="text-align:center; font-style:italic; margin-top:20px; margin-bottom:20px;">

</div>

</div>
</div>
<div class="custom-footer">
  <div class="footer-left" style="width: 30%; float: centre">
    <img src="assets/footer/footer1.png" alt="wimr-logo">
  </div>
  <div class="footer-center">
    <p><strong>Site Creators</strong><br>
      Thomas O'Neil<br>
      Harry Robertson<br>
      <a href="mailto:thomas.oneil@sydney.edu.au"><strong>Contact us</strong></a>
    </p>
  </div>
  <div class="footer-right" style="width: 30%; float: centre">
    <img src="assets/footer/footer2.png" alt="usyd-logo">
  </div>
</div>
<div class="footer-updated">
  <p>This site was last updated</p>
  <p><script>document.write(new Date().toISOString().slice(0, 10));</script></p>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="chapter-2-data-types-and-structures.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="chapter-4-data-manipulation-with-tidyverse.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf", "_main.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
