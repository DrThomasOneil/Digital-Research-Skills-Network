<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 4: Data Manipulation with tidyverse | Introduction to R and analytic Programming</title>
  <meta name="description" content="Chapter 4: Data Manipulation with tidyverse | Introduction to R and analytic Programming" />
  <meta name="generator" content="bookdown 0.41 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 4: Data Manipulation with tidyverse | Introduction to R and analytic Programming" />
  <meta property="og:type" content="book" />
  
  
  <meta name="github-repo" content="DrThomasOneil/analysis-user-group" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 4: Data Manipulation with tidyverse | Introduction to R and analytic Programming" />
  
  
  

<meta name="author" content="Yuchen Li &amp; Thomas O’Neil" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="chapter-3-basic-programming.html"/>
<link rel="next" href="chapter-5-data-visualisation-with-ggplot2.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/codefolding-lua-1.1/codefolding-lua.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  background-color: #f8f8f8; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ef2929; } /* Alert */
code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #204a87; } /* Attribute */
code span.bn { color: #0000cf; } /* BaseN */
code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4e9a06; } /* Char */
code span.cn { color: #8f5902; } /* Constant */
code span.co { color: #8f5902; font-style: italic; } /* Comment */
code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code span.dt { color: #204a87; } /* DataType */
code span.dv { color: #0000cf; } /* DecVal */
code span.er { color: #a40000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #0000cf; } /* Float */
code span.fu { color: #204a87; font-weight: bold; } /* Function */
code span.im { } /* Import */
code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code span.ot { color: #8f5902; } /* Other */
code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code span.sc { color: #ce5c00; font-weight: bold; } /* SpecialChar */
code span.ss { color: #4e9a06; } /* SpecialString */
code span.st { color: #4e9a06; } /* String */
code span.va { color: #000000; } /* Variable */
code span.vs { color: #4e9a06; } /* VerbatimString */
code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Introduction to R and analytic Programming</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome!</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i>Introduction</a>
<ul>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#transitioning-from-manual-tools-e.g.-excel-prism-to-programming-based-workflows-in-r."><i class="fa fa-check"></i>Transitioning from manual tools (e.g. Excel &amp; Prism) to programming-based workflows in R.</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#handling-data---be-specific"><i class="fa fa-check"></i>Handling data - be specific!</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#directories"><i class="fa fa-check"></i>Directories</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#reproducibility-and-automation"><i class="fa fa-check"></i>Reproducibility and automation</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-1-getting-started-in-r-and-rstudio.html"><a href="chapter-1-getting-started-in-r-and-rstudio.html"><i class="fa fa-check"></i>Chapter 1: Getting Started in R and RStudio</a>
<ul>
<li class="chapter" data-level="" data-path="chapter-1-getting-started-in-r-and-rstudio.html"><a href="chapter-1-getting-started-in-r-and-rstudio.html#r-as-a-programming-language"><i class="fa fa-check"></i>R as a programming language</a></li>
<li class="chapter" data-level="" data-path="chapter-1-getting-started-in-r-and-rstudio.html"><a href="chapter-1-getting-started-in-r-and-rstudio.html#installing-r-and-rstudio"><i class="fa fa-check"></i>Installing R and RStudio</a></li>
<li class="chapter" data-level="" data-path="chapter-1-getting-started-in-r-and-rstudio.html"><a href="chapter-1-getting-started-in-r-and-rstudio.html#navigating-rstudio"><i class="fa fa-check"></i>Navigating RStudio</a></li>
<li class="chapter" data-level="" data-path="chapter-1-getting-started-in-r-and-rstudio.html"><a href="chapter-1-getting-started-in-r-and-rstudio.html#projects"><i class="fa fa-check"></i>Projects</a></li>
<li class="chapter" data-level="" data-path="chapter-1-getting-started-in-r-and-rstudio.html"><a href="chapter-1-getting-started-in-r-and-rstudio.html#using-r"><i class="fa fa-check"></i>Using R</a></li>
<li class="chapter" data-level="" data-path="chapter-1-getting-started-in-r-and-rstudio.html"><a href="chapter-1-getting-started-in-r-and-rstudio.html#hello-world"><i class="fa fa-check"></i>Hello World</a></li>
<li class="chapter" data-level="" data-path="chapter-1-getting-started-in-r-and-rstudio.html"><a href="chapter-1-getting-started-in-r-and-rstudio.html#exercise-write-your-first-second-script"><i class="fa fa-check"></i>Exercise: Write your <strike>first</strike> second script</a></li>
<li class="chapter" data-level="" data-path="chapter-1-getting-started-in-r-and-rstudio.html"><a href="chapter-1-getting-started-in-r-and-rstudio.html#next-chapter"><i class="fa fa-check"></i>Next Chapter</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-2-data-types-and-structures.html"><a href="chapter-2-data-types-and-structures.html"><i class="fa fa-check"></i>Chapter 2: Data Types and Structures</a>
<ul>
<li class="chapter" data-level="" data-path="chapter-2-data-types-and-structures.html"><a href="chapter-2-data-types-and-structures.html#data-types"><i class="fa fa-check"></i>Data Types</a></li>
<li class="chapter" data-level="" data-path="chapter-2-data-types-and-structures.html"><a href="chapter-2-data-types-and-structures.html#data-structures"><i class="fa fa-check"></i>Data Structures</a></li>
<li class="chapter" data-level="" data-path="chapter-2-data-types-and-structures.html"><a href="chapter-2-data-types-and-structures.html#importing-and-saving-files-in-r"><i class="fa fa-check"></i>Importing and saving files in R</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-3-basic-programming.html"><a href="chapter-3-basic-programming.html"><i class="fa fa-check"></i>Chapter 3: Basic Programming</a>
<ul>
<li class="chapter" data-level="" data-path="chapter-3-basic-programming.html"><a href="chapter-3-basic-programming.html#assigning-variables"><i class="fa fa-check"></i>Assigning variables</a></li>
<li class="chapter" data-level="" data-path="chapter-3-basic-programming.html"><a href="chapter-3-basic-programming.html#conditional-statements"><i class="fa fa-check"></i>Conditional statements</a></li>
<li class="chapter" data-level="" data-path="chapter-3-basic-programming.html"><a href="chapter-3-basic-programming.html#loops"><i class="fa fa-check"></i>Loops</a></li>
<li class="chapter" data-level="" data-path="chapter-3-basic-programming.html"><a href="chapter-3-basic-programming.html#writing-a-function"><i class="fa fa-check"></i>Writing a function</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-4-data-manipulation-with-tidyverse.html"><a href="chapter-4-data-manipulation-with-tidyverse.html"><i class="fa fa-check"></i>Chapter 4: Data Manipulation with <code>tidyverse</code></a>
<ul>
<li class="chapter" data-level="" data-path="chapter-4-data-manipulation-with-tidyverse.html"><a href="chapter-4-data-manipulation-with-tidyverse.html#why-use-tidyverse"><i class="fa fa-check"></i>Why use tidyverse</a></li>
<li class="chapter" data-level="" data-path="chapter-4-data-manipulation-with-tidyverse.html"><a href="chapter-4-data-manipulation-with-tidyverse.html#filtering-rows-and-columns"><i class="fa fa-check"></i>Filtering rows and columns</a></li>
<li class="chapter" data-level="" data-path="chapter-4-data-manipulation-with-tidyverse.html"><a href="chapter-4-data-manipulation-with-tidyverse.html#adding-a-column-using-mutate"><i class="fa fa-check"></i>Adding a column using <code>mutate()</code></a></li>
<li class="chapter" data-level="" data-path="chapter-4-data-manipulation-with-tidyverse.html"><a href="chapter-4-data-manipulation-with-tidyverse.html#group_by-and-summarize"><i class="fa fa-check"></i><code>group_by()</code> and <code>summarize()</code></a></li>
<li class="chapter" data-level="" data-path="chapter-4-data-manipulation-with-tidyverse.html"><a href="chapter-4-data-manipulation-with-tidyverse.html#pivot"><i class="fa fa-check"></i>Pivot</a>
<ul>
<li class="chapter" data-level="" data-path="chapter-4-data-manipulation-with-tidyverse.html"><a href="chapter-4-data-manipulation-with-tidyverse.html#hopefully-it-is-clear-why-tidyverse-is-a-useful-tool."><i class="fa fa-check"></i>Hopefully it is clear why <code>tidyverse</code> is a useful tool.</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-5-data-visualisation-with-ggplot2.html"><a href="chapter-5-data-visualisation-with-ggplot2.html"><i class="fa fa-check"></i>Chapter 5: Data Visualisation with <code>ggplot2</code></a>
<ul>
<li class="chapter" data-level="" data-path="chapter-5-data-visualisation-with-ggplot2.html"><a href="chapter-5-data-visualisation-with-ggplot2.html#basics-of-ggplot2"><i class="fa fa-check"></i>Basics of ggplot2</a>
<ul>
<li class="chapter" data-level="" data-path="chapter-5-data-visualisation-with-ggplot2.html"><a href="chapter-5-data-visualisation-with-ggplot2.html#scatterplot"><i class="fa fa-check"></i>Scatterplot</a></li>
<li class="chapter" data-level="" data-path="chapter-5-data-visualisation-with-ggplot2.html"><a href="chapter-5-data-visualisation-with-ggplot2.html#boxplot"><i class="fa fa-check"></i>Boxplot</a></li>
<li class="chapter" data-level="" data-path="chapter-5-data-visualisation-with-ggplot2.html"><a href="chapter-5-data-visualisation-with-ggplot2.html#columnbar-graph"><i class="fa fa-check"></i>Column/bar graph</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-5-data-visualisation-with-ggplot2.html"><a href="chapter-5-data-visualisation-with-ggplot2.html#summary"><i class="fa fa-check"></i>Summary</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-6-data-visualisation-with-ggplot2-2.html"><a href="chapter-6-data-visualisation-with-ggplot2-2.html"><i class="fa fa-check"></i>Chapter 6: Data Visualisation with <code>ggplot2</code> 2</a>
<ul>
<li class="chapter" data-level="" data-path="chapter-6-data-visualisation-with-ggplot2-2.html"><a href="chapter-6-data-visualisation-with-ggplot2-2.html#adjusting-theme-elements"><i class="fa fa-check"></i>Adjusting theme elements</a></li>
<li class="chapter" data-level="" data-path="chapter-6-data-visualisation-with-ggplot2-2.html"><a href="chapter-6-data-visualisation-with-ggplot2-2.html#annotating-the-plot"><i class="fa fa-check"></i>Annotating the plot</a></li>
<li class="chapter" data-level="" data-path="chapter-6-data-visualisation-with-ggplot2-2.html"><a href="chapter-6-data-visualisation-with-ggplot2-2.html#facet_wrap-and-group"><i class="fa fa-check"></i>facet_wrap() and Group</a></li>
<li class="chapter" data-level="" data-path="chapter-6-data-visualisation-with-ggplot2-2.html"><a href="chapter-6-data-visualisation-with-ggplot2-2.html#saving-plots"><i class="fa fa-check"></i>Saving plots</a></li>
<li class="chapter" data-level="" data-path="chapter-6-data-visualisation-with-ggplot2-2.html"><a href="chapter-6-data-visualisation-with-ggplot2-2.html#some-final-hints"><i class="fa fa-check"></i>Some final hints</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-7-statistical-analysis.html"><a href="chapter-7-statistical-analysis.html"><i class="fa fa-check"></i>Chapter 7: Statistical Analysis</a>
<ul>
<li class="chapter" data-level="" data-path="chapter-7-statistical-analysis.html"><a href="chapter-7-statistical-analysis.html#descriptive-statistics"><i class="fa fa-check"></i>Descriptive statistics</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-8-reproducible-reports-with-rmarkdown.html"><a href="chapter-8-reproducible-reports-with-rmarkdown.html"><i class="fa fa-check"></i>Chapter 8: Reproducible Reports with RMarkdown</a></li>
<li class="chapter" data-level="" data-path="conclusions.html"><a href="conclusions.html"><i class="fa fa-check"></i>Conclusions</a></li>
<li class="divider"></li>
<li><a href="https://drthomasoneil.github.io/analysis-user-group" target="blank"><i><strong>Return to the analysis page!</strong></i></a></li>
<li><a href="https://github.com/DrThomasOneil/analysis-user-group/tree/main/docs/r-tutorial" target="blank">See The Source Code</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Introduction to R and analytic Programming</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="chapter-4-data-manipulation-with-tidyverse" class="section level1 hasAnchor">
<h1>Chapter 4: Data Manipulation with <code>tidyverse</code><a href="chapter-4-data-manipulation-with-tidyverse.html#chapter-4-data-manipulation-with-tidyverse" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div class="hint-goals">
<p><strong>Goals:</strong><br />
Introduce <code>tidyverse</code> for filtering, mutating, summarizing and pivoting data.<br />
  • Filtering rows (<code>filter()</code>), selecting columns (<code>select()</code>).<br />
  • Adding new columns (<code>mutate()</code>).<br />
  • Grouping and summarizing (<code>group_by()</code> + <code>summarize()</code>).<br />
  • Pivot longer and Pivot wider</p>
</div>
<p><read-time><i><strong>Read time</strong>: 10 Minutes</i></read-time></p>
<p><wimr></p>
<div id="why-use-tidyverse" class="section level2 hasAnchor">
<h2>Why use tidyverse<a href="chapter-4-data-manipulation-with-tidyverse.html#why-use-tidyverse" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>If you wanted to just analyse a portion of your data, you could just subset the data frame.</p>
<details class=chunk-details open><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="chapter-4-data-manipulation-with-tidyverse.html#cb65-1" tabindex="-1"></a>abdo <span class="ot">&lt;-</span> data[data<span class="sc">$</span>tissue <span class="sc">==</span> <span class="st">&quot;Abdomen&quot;</span>,] <span class="co"># select only the rows where tissue contains Abdomen</span></span>
<span id="cb65-2"><a href="chapter-4-data-manipulation-with-tidyverse.html#cb65-2" tabindex="-1"></a><span class="fu">mean</span>(abdo<span class="sc">$</span>CCR5_MFI)</span></code></pre></div>
</details>
<pre><code>## [1] 4729.088</code></pre>
<details class=chunk-details open><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="chapter-4-data-manipulation-with-tidyverse.html#cb67-1" tabindex="-1"></a>abdo_epi <span class="ot">&lt;-</span> abdo[abdo<span class="sc">$</span>layer <span class="sc">==</span> <span class="st">&quot;Epithelium&quot;</span>,]</span>
<span id="cb67-2"><a href="chapter-4-data-manipulation-with-tidyverse.html#cb67-2" tabindex="-1"></a>abdo_um <span class="ot">&lt;-</span> abdo[abdo<span class="sc">$</span>layer <span class="sc">==</span> <span class="st">&quot;Underlying&quot;</span>,]</span>
<span id="cb67-3"><a href="chapter-4-data-manipulation-with-tidyverse.html#cb67-3" tabindex="-1"></a><span class="fu">mean</span>(abdo_epi<span class="sc">$</span>CCR5_MFI)</span></code></pre></div>
</details>
<pre><code>## [1] 5462.761</code></pre>
<details class=chunk-details open><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="chapter-4-data-manipulation-with-tidyverse.html#cb69-1" tabindex="-1"></a><span class="fu">mean</span>(abdo_um<span class="sc">$</span>CCR5_MFI)</span></code></pre></div>
</details>
<pre><code>## [1] 3995.416</code></pre>
<div class="hint-warn">
<p>However, you might have already noticed that your environment is filling up with objects and variables that we keep assigning.</p>
</div>
<p>With more complicated data this can get pretty annoying.</p>
<p>We can remove things from the environment using <code>rm(abdo, abdo_epi, abdo_um)</code>.</p>
<p>We could instead write long conditionals within the square brackets.</p>
<details class=chunk-details open><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="chapter-4-data-manipulation-with-tidyverse.html#cb71-1" tabindex="-1"></a><span class="fu">mean</span>(data[data<span class="sc">$</span>tissue <span class="sc">==</span> <span class="st">&quot;Abdomen&quot;</span> <span class="sc">&amp;</span> data<span class="sc">$</span>layer <span class="sc">==</span> <span class="st">&quot;Epithelium&quot;</span>, <span class="st">&quot;CCR5_MFI&quot;</span>])</span></code></pre></div>
</details>
<pre><code>## [1] 5462.761</code></pre>
<details class=chunk-details open><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="chapter-4-data-manipulation-with-tidyverse.html#cb73-1" tabindex="-1"></a><span class="fu">mean</span>(data[data<span class="sc">$</span>tissue <span class="sc">==</span> <span class="st">&quot;Abdomen&quot;</span> <span class="sc">&amp;</span> data<span class="sc">$</span>layer <span class="sc">==</span> <span class="st">&quot;Underlying&quot;</span>, <span class="st">&quot;CCR5_MFI&quot;</span>])</span></code></pre></div>
</details>
<pre><code>## [1] 3995.416</code></pre>
<p>However, you’ll find that this gets very long and confusing and annoying as you incorporate these into other functions, like ggplot.</p>
<p>This is where <code>dplyr</code> becomes advantageous. <code>dplyr</code> allows us to manipulate an object without changing it permanently, using very efficient functions and a concept called pipes.</p>
<p><code>dplyr</code> is a package within the <code>tidyverse</code> ecosystem, which contains <code>dplyr</code>, <code>tidyr</code>, <code>ggplot2</code>, <code>tibble</code>, <code>stringr</code>, and others. So, we can install and load <code>tidyverse</code> for this chapter.</p>
<p><wimr></p>
</div>
<div id="filtering-rows-and-columns" class="section level2 hasAnchor">
<h2>Filtering rows and columns<a href="chapter-4-data-manipulation-with-tidyverse.html#filtering-rows-and-columns" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>Pipes</strong> (<code>%&gt;%</code>) are an important concept and effectively stand for “<em>using this</em>”.</p>
<p>From the example above, we could use <code>dplyr</code> instead, without assigning any new vairables, in a nice and tidy and follwable layout. When spoken, it might read like…</p>
<details class=chunk-details open><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="chapter-4-data-manipulation-with-tidyverse.html#cb75-1" tabindex="-1"></a>data <span class="sc">%&gt;%</span> <span class="co"># using this object, I want to...</span></span>
<span id="cb75-2"><a href="chapter-4-data-manipulation-with-tidyverse.html#cb75-2" tabindex="-1"></a>  <span class="fu">filter</span>(tissue <span class="sc">==</span> <span class="st">&quot;Abdomen&quot;</span>) <span class="sc">%&gt;%</span> <span class="co"># then &quot;using this&quot; new filtered object</span></span>
<span id="cb75-3"><a href="chapter-4-data-manipulation-with-tidyverse.html#cb75-3" tabindex="-1"></a>  <span class="fu">filter</span>(layer <span class="sc">==</span> <span class="st">&quot;Epithelium&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb75-4"><a href="chapter-4-data-manipulation-with-tidyverse.html#cb75-4" tabindex="-1"></a>  <span class="fu">select</span>(CCR5_MFI) <span class="sc">%&gt;%</span> <span class="co"># using this object, select CCR5_MFI column</span></span>
<span id="cb75-5"><a href="chapter-4-data-manipulation-with-tidyverse.html#cb75-5" tabindex="-1"></a>  <span class="fu">unlist</span>() <span class="sc">%&gt;%</span> <span class="co"># unlist to make it a vector</span></span>
<span id="cb75-6"><a href="chapter-4-data-manipulation-with-tidyverse.html#cb75-6" tabindex="-1"></a>  <span class="fu">mean</span>() <span class="co"># and get the mean</span></span></code></pre></div>
</details>
<pre><code>## [1] 5462.761</code></pre>
<p>Now, this seems like a lot for determining one value, but we’ll see what <code>group_by()</code> and <code>summarize()</code> do shortly, which demonstrate why you might want to learn dplyr asap.</p>
<p><wimr></p>
</div>
<div id="adding-a-column-using-mutate" class="section level2 hasAnchor">
<h2>Adding a column using <code>mutate()</code><a href="chapter-4-data-manipulation-with-tidyverse.html#adding-a-column-using-mutate" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Similarly, in previous chapters, we have added columns to the data for ease of use. For example:</p>
<details class=chunk-details open><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="chapter-4-data-manipulation-with-tidyverse.html#cb77-1" tabindex="-1"></a><span class="co"># assign a new column</span></span>
<span id="cb77-2"><a href="chapter-4-data-manipulation-with-tidyverse.html#cb77-2" tabindex="-1"></a>data<span class="sc">$</span>percent_CD4 <span class="ot">&lt;-</span> <span class="dv">100</span><span class="sc">*</span>data<span class="sc">$</span>CD4<span class="sc">/</span>data<span class="sc">$</span>CD3</span>
<span id="cb77-3"><a href="chapter-4-data-manipulation-with-tidyverse.html#cb77-3" tabindex="-1"></a><span class="co"># then use dplyr to determine the mean value of Abdomen Epithelium</span></span>
<span id="cb77-4"><a href="chapter-4-data-manipulation-with-tidyverse.html#cb77-4" tabindex="-1"></a>data <span class="sc">%&gt;%</span> </span>
<span id="cb77-5"><a href="chapter-4-data-manipulation-with-tidyverse.html#cb77-5" tabindex="-1"></a>  <span class="fu">filter</span>(tissue <span class="sc">==</span> <span class="st">&quot;Abdomen&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb77-6"><a href="chapter-4-data-manipulation-with-tidyverse.html#cb77-6" tabindex="-1"></a>  <span class="fu">filter</span>(layer <span class="sc">==</span> <span class="st">&quot;Epithelium&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb77-7"><a href="chapter-4-data-manipulation-with-tidyverse.html#cb77-7" tabindex="-1"></a>  <span class="fu">select</span>(percent_CD4) <span class="sc">%&gt;%</span> </span>
<span id="cb77-8"><a href="chapter-4-data-manipulation-with-tidyverse.html#cb77-8" tabindex="-1"></a>  <span class="fu">unlist</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb77-9"><a href="chapter-4-data-manipulation-with-tidyverse.html#cb77-9" tabindex="-1"></a>  <span class="fu">mean</span>()</span></code></pre></div>
</details>
<pre><code>## [1] 43.09003</code></pre>
<p>However, there might be hundreds of extra columns I want to make. And that means making 100 unique and descriptive column names, that then just gets more and more confusing as you add to the data.</p>
<p>So, we can use <code>mutate()</code> instead, so that we don’t have to alter our original data.</p>
<details class=chunk-details open><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="chapter-4-data-manipulation-with-tidyverse.html#cb79-1" tabindex="-1"></a>data <span class="sc">%&gt;%</span></span>
<span id="cb79-2"><a href="chapter-4-data-manipulation-with-tidyverse.html#cb79-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">percent_CD4 =</span> <span class="dv">100</span><span class="sc">*</span>CD4<span class="sc">/</span>CD3)<span class="sc">%&gt;%</span> <span class="co"># Add a new column</span></span>
<span id="cb79-3"><a href="chapter-4-data-manipulation-with-tidyverse.html#cb79-3" tabindex="-1"></a>  <span class="fu">filter</span>(tissue <span class="sc">==</span> <span class="st">&quot;Abdomen&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb79-4"><a href="chapter-4-data-manipulation-with-tidyverse.html#cb79-4" tabindex="-1"></a>  <span class="fu">filter</span>(layer <span class="sc">==</span> <span class="st">&quot;Epithelium&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb79-5"><a href="chapter-4-data-manipulation-with-tidyverse.html#cb79-5" tabindex="-1"></a>  <span class="fu">select</span>(percent_CD4) <span class="sc">%&gt;%</span> </span>
<span id="cb79-6"><a href="chapter-4-data-manipulation-with-tidyverse.html#cb79-6" tabindex="-1"></a>  <span class="fu">unlist</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb79-7"><a href="chapter-4-data-manipulation-with-tidyverse.html#cb79-7" tabindex="-1"></a>  <span class="fu">mean</span>() <span class="sc">%&gt;%</span></span>
<span id="cb79-8"><a href="chapter-4-data-manipulation-with-tidyverse.html#cb79-8" tabindex="-1"></a>  <span class="fu">round</span>(<span class="dv">2</span>)</span></code></pre></div>
</details>
<pre><code>## [1] 43.09</code></pre>
<p><wimr></p>
</div>
<div id="group_by-and-summarize" class="section level2 hasAnchor">
<h2><code>group_by()</code> and <code>summarize()</code><a href="chapter-4-data-manipulation-with-tidyverse.html#group_by-and-summarize" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Here we’ve been writing 8 lines of code to get the mean values of one tissue type, which is useful if you wanted to do something with that exact single value. Alternatively, we can also use group_by() or summarize() to get values across multiple variables.</p>
<details class=chunk-details open><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="chapter-4-data-manipulation-with-tidyverse.html#cb81-1" tabindex="-1"></a>data <span class="sc">%&gt;%</span> </span>
<span id="cb81-2"><a href="chapter-4-data-manipulation-with-tidyverse.html#cb81-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">percent_CD4 =</span> <span class="dv">100</span><span class="sc">*</span>CD4<span class="sc">/</span>CD3) <span class="sc">%&gt;%</span></span>
<span id="cb81-3"><a href="chapter-4-data-manipulation-with-tidyverse.html#cb81-3" tabindex="-1"></a>  <span class="fu">group_by</span>(tissue, layer) <span class="sc">%&gt;%</span> <span class="co"># almost like &#39;treat the data like n-data frames per combinations of tissue and layer</span></span>
<span id="cb81-4"><a href="chapter-4-data-manipulation-with-tidyverse.html#cb81-4" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">mean_percent_CD4 =</span> <span class="fu">mean</span>(percent_CD4)) <span class="co"># summarise in a new table</span></span></code></pre></div>
</details>
<pre><code>## `summarise()` has grouped output by &#39;tissue&#39;. You can override using the `.groups` argument.</code></pre>
<pre><code>## # A tibble: 6 × 3
## # Groups:   tissue [3]
##   tissue  layer      mean_percent_CD4
##   &lt;chr&gt;   &lt;chr&gt;                 &lt;dbl&gt;
## 1 Abdomen Epithelium             43.1
## 2 Abdomen Underlying             36.5
## 3 Labia   Epithelium             28.8
## 4 Labia   Underlying             65.9
## 5 Vagina  Epithelium             26.0
## 6 Vagina  Underlying             52.5</code></pre>
<p><wimr></p>
</div>
<div id="pivot" class="section level2 hasAnchor">
<h2>Pivot<a href="chapter-4-data-manipulation-with-tidyverse.html#pivot" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Packages and functions, e.g. ggplot, will sometimes require that data is organised in the correct way. <code>pivot_longer()</code> and <code>pivot_wider()</code> can be effective tools for rearranging your data to suit.</p>
<p>Here we’ll just use a short subset of the data to easily visualise what is happening.</p>
<details class=chunk-details open><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb84-1"><a href="chapter-4-data-manipulation-with-tidyverse.html#cb84-1" tabindex="-1"></a>data2 <span class="ot">&lt;-</span>data[<span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>,<span class="dv">25</span><span class="sc">:</span><span class="dv">34</span>, <span class="dv">41</span><span class="sc">:</span><span class="dv">50</span>),<span class="fu">colnames</span>(data) <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;donor&quot;</span>, <span class="st">&quot;tissue&quot;</span>, <span class="st">&quot;layer&quot;</span>, <span class="st">&#39;group&#39;</span>, <span class="st">&quot;CD3&quot;</span>, <span class="st">&quot;CD4&quot;</span>, <span class="st">&quot;CD8&quot;</span>)]</span></code></pre></div>
</details>
<p>Currently, the data is in what we might consider <strong>wide</strong> format. We have one row per tissue layer and columns for our CD3, CD4, CD8 cell counts. We’ll start by mutating extra columns to get the CD4 and Cd8 percentages and then making it <strong>long</strong>, so that we get one column called “percent” with CD4 and CD8 in a different single column called “subset”. This is a format then compatible with ggplot.</p>
<details class=chunk-details open><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="chapter-4-data-manipulation-with-tidyverse.html#cb85-1" tabindex="-1"></a>data2 <span class="sc">%&gt;%</span> </span>
<span id="cb85-2"><a href="chapter-4-data-manipulation-with-tidyverse.html#cb85-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">percent_CD4 =</span> <span class="dv">100</span><span class="sc">*</span>CD4<span class="sc">/</span>CD3, <span class="at">percent_CD8 =</span> <span class="dv">100</span><span class="sc">*</span>CD8<span class="sc">/</span>CD3) <span class="sc">%&gt;%</span></span>
<span id="cb85-3"><a href="chapter-4-data-manipulation-with-tidyverse.html#cb85-3" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">c</span>(percent_CD4, percent_CD8), <span class="co">#which columns to choose for elongating</span></span>
<span id="cb85-4"><a href="chapter-4-data-manipulation-with-tidyverse.html#cb85-4" tabindex="-1"></a>               <span class="at">names_to =</span> <span class="st">&quot;subset&quot;</span>, <span class="co"># name of new column containing names</span></span>
<span id="cb85-5"><a href="chapter-4-data-manipulation-with-tidyverse.html#cb85-5" tabindex="-1"></a>               <span class="at">values_to =</span> <span class="st">&quot;percent&quot;</span>) <span class="sc">%&gt;%</span> <span class="co"># name of new column containing values</span></span>
<span id="cb85-6"><a href="chapter-4-data-manipulation-with-tidyverse.html#cb85-6" tabindex="-1"></a>  <span class="fu">print</span>()</span></code></pre></div>
</details>
<pre><code>## # A tibble: 60 × 9
##    donor  tissue  layer      group    CD3   CD8   CD4 subset      percent
##    &lt;chr&gt;  &lt;chr&gt;   &lt;chr&gt;      &lt;chr&gt;  &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt;         &lt;dbl&gt;
##  1 Donor1 Abdomen Epithelium A_E     4460  2205  2184 percent_CD4    49.0
##  2 Donor1 Abdomen Epithelium A_E     4460  2205  2184 percent_CD8    49.4
##  3 Donor1 Abdomen Underlying A_UM   15295  7960  5529 percent_CD4    36.1
##  4 Donor1 Abdomen Underlying A_UM   15295  7960  5529 percent_CD8    52.0
##  5 Donor2 Abdomen Epithelium A_E    49774 25149 25251 percent_CD4    50.7
##  6 Donor2 Abdomen Epithelium A_E    49774 25149 25251 percent_CD8    50.5
##  7 Donor2 Abdomen Underlying A_UM   68879 47729 33616 percent_CD4    48.8
##  8 Donor2 Abdomen Underlying A_UM   68879 47729 33616 percent_CD8    69.3
##  9 Donor3 Abdomen Epithelium A_E   208665 92410 84610 percent_CD4    40.5
## 10 Donor3 Abdomen Epithelium A_E   208665 92410 84610 percent_CD8    44.3
## # ℹ 50 more rows</code></pre>
<p>You’ll notice we have duplicate entries for CD3, CD8 and CD4, but our column subset has alternating percent_CD4/CD8 and the value for that donor is in the percent column. This can now be used in a boxlpot in ggplot.</p>
<details class=chunk-details open><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb87-1"><a href="chapter-4-data-manipulation-with-tidyverse.html#cb87-1" tabindex="-1"></a>data2 <span class="sc">%&gt;%</span> </span>
<span id="cb87-2"><a href="chapter-4-data-manipulation-with-tidyverse.html#cb87-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">percent_CD4 =</span> <span class="dv">100</span><span class="sc">*</span>CD4<span class="sc">/</span>CD3, <span class="at">percent_CD8 =</span> <span class="dv">100</span><span class="sc">*</span>CD8<span class="sc">/</span>CD3) <span class="sc">%&gt;%</span></span>
<span id="cb87-3"><a href="chapter-4-data-manipulation-with-tidyverse.html#cb87-3" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">c</span>(percent_CD4, percent_CD8), </span>
<span id="cb87-4"><a href="chapter-4-data-manipulation-with-tidyverse.html#cb87-4" tabindex="-1"></a>               <span class="at">names_to =</span> <span class="st">&quot;subset&quot;</span>, </span>
<span id="cb87-5"><a href="chapter-4-data-manipulation-with-tidyverse.html#cb87-5" tabindex="-1"></a>               <span class="at">values_to =</span> <span class="st">&quot;percent&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb87-6"><a href="chapter-4-data-manipulation-with-tidyverse.html#cb87-6" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>group, <span class="at">y=</span>percent, <span class="at">fill=</span>subset)) <span class="sc">+</span> </span>
<span id="cb87-7"><a href="chapter-4-data-manipulation-with-tidyverse.html#cb87-7" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="at">outliers=</span>F)<span class="sc">+</span><span class="fu">theme_classic</span>()</span></code></pre></div>
</details>
<p><img src="_main_files/figure-html/unnamed-chunk-28-1.png" width="672" /></p>
<div class="hint-info">
<p>Imaging having a dataframe tens of thousands long, and you were to pivot longer and then store this data. You can imagine how inefficient your analysis workflow would become in such circumstances.</p>
</div>
<p>Ok. Lets say that we wanted to see if there was a correlation between the percent of CD4+ T cells in epithelium versus underlying mucosa. To do this, we calculate the percent of CD4, but we need an x and y vector to give to ggplot. Currently, the <code>data</code> object looks like a long version of what we want. So we can pivot wider to make our graph.</p>
<details class=chunk-details open><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb88-1"><a href="chapter-4-data-manipulation-with-tidyverse.html#cb88-1" tabindex="-1"></a>data2 <span class="sc">%&gt;%</span> </span>
<span id="cb88-2"><a href="chapter-4-data-manipulation-with-tidyverse.html#cb88-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">percent_CD4 =</span> <span class="dv">100</span><span class="sc">*</span>CD4<span class="sc">/</span>CD3) <span class="sc">%&gt;%</span></span>
<span id="cb88-3"><a href="chapter-4-data-manipulation-with-tidyverse.html#cb88-3" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(group, CD3,CD4,CD8))<span class="sc">%&gt;%</span> <span class="co"># using a - with select lets use remove, instead of select a given column. </span></span>
<span id="cb88-4"><a href="chapter-4-data-manipulation-with-tidyverse.html#cb88-4" tabindex="-1"></a>  <span class="fu">group_by</span>(tissue)<span class="sc">%&gt;%</span></span>
<span id="cb88-5"><a href="chapter-4-data-manipulation-with-tidyverse.html#cb88-5" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> layer, <span class="at">values_from =</span> percent_CD4) <span class="sc">%&gt;%</span></span>
<span id="cb88-6"><a href="chapter-4-data-manipulation-with-tidyverse.html#cb88-6" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>Epithelium, <span class="at">y=</span>Underlying, <span class="at">color=</span>tissue))<span class="sc">+</span></span>
<span id="cb88-7"><a href="chapter-4-data-manipulation-with-tidyverse.html#cb88-7" tabindex="-1"></a>  <span class="fu">geom_point</span>()<span class="sc">+</span> </span>
<span id="cb88-8"><a href="chapter-4-data-manipulation-with-tidyverse.html#cb88-8" tabindex="-1"></a>  <span class="fu">stat_ellipse</span>()<span class="sc">+</span></span>
<span id="cb88-9"><a href="chapter-4-data-manipulation-with-tidyverse.html#cb88-9" tabindex="-1"></a>  <span class="fu">theme_classic</span>()</span></code></pre></div>
</details>
<p><img src="_main_files/figure-html/unnamed-chunk-29-1.png" width="672" /></p>
<p><wimr></p>
<div id="hopefully-it-is-clear-why-tidyverse-is-a-useful-tool." class="section level3 hasAnchor">
<h3>Hopefully it is clear why <code>tidyverse</code> is a useful tool.<a href="chapter-4-data-manipulation-with-tidyverse.html#hopefully-it-is-clear-why-tidyverse-is-a-useful-tool." class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The next two chapters will continue to build your skills up to generating a range of different figures using ggplot.</p>
<p><a href="https://drthomasoneil.github.io/analysis-user-group/r-tutorial/_book/chapter-5-data-visualisation-with-ggplot2.html">Next chapter →</a></p>
<div id="quote-box" style="text-align:center; font-style:italic; margin-top:20px; margin-bottom:20px;">

</div>

</div>
</div>
</div>
<div class="custom-footer">
  <div class="footer-left" style="width: 30%; float: centre">
    <img src="assets/footer/footer1.png" alt="wimr-logo">
  </div>
  <div class="footer-center">
    <p><strong>Site Creators</strong><br>
      Thomas O'Neil<br>
      Harry Robertson<br>
      <a href="mailto:thomas.oneil@sydney.edu.au"><strong>Contact us</strong></a>
    </p>
  </div>
  <div class="footer-right" style="width: 30%; float: centre">
    <img src="assets/footer/footer2.png" alt="usyd-logo">
  </div>
</div>
<div class="footer-updated">
  <p>This site was last updated</p>
  <p><script>document.write(new Date().toISOString().slice(0, 10));</script></p>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="chapter-3-basic-programming.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="chapter-5-data-visualisation-with-ggplot2.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf", "_main.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
